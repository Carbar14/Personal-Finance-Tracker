<!-- layout -->
{% extends "layout.html" %}

<!-- Main -->
{% block body %}
<div class="cont center">
  <div class="formBox">
    <h2>Filters</h2>

    <form action="/analyzeIncome" method="post">
      <!-- category  -->
      <div class="mb-3">
        <label for="category">Choose Category:</label>
        <select name="category" id="category" class="form-select">
          <option></option>
          {% for category in categories %}
          <option value="{{category["category"]}}">{{category["category"]}}</option>
          {% endfor %}
        </select>
      </div>

    <!-- purchaseLocation  -->
      <div class="mb-3">
        <label for="method">Choose Payment Method:</label>
        <select name="method" id="method" class="form-select">
          <option></option>
          {% for method in methods %}
          <option value="{{method["method"]}}">{{method["method"]}}</option>
          {% endfor %}
        </select>
      </div>

      <!-- keyword -->
      <div class="mb-3">
        <label for="keywords">Description Keywords:</label>
        <input type="text" name="keywords" id="keywords">
      </div>

      <!-- date -->
      <div class="mb-3">
        <label for="date">Date:</label>
        <input type="date" name="date" id="date">
      </div>

      <!-- search button  -->
      <button type="submit" class="btn btn-primary">Search</button>
    </form>
  </div>
  <br>
  <div>
    <div>
      {% if incomes -%}
      <h2>Income</h2>
      <div class="table-responsive">
        <table class="table table-dark table-striped table-bordered table-hover">
          <tr>
            <th scope="col">Category</th>
            <th scope="col">Description</th>
            <th scope="col">Method</th>
            <th scope="col">Income</th>
            <th scope="col">Date</th>
          </tr>
  
          {% for income in incomes %}
          <tr>
            <td>{{ income["category"] }}</td>
            <td>{{ income["description"] }}</td>
            <td>{{ income["method"] }}</td>
            <td>{{ "$%.2f" | format(income["income"]) }}</td>
            <td>{{ income["date"] }}</td>
          </tr>
          {% endfor %}
        </table>
      </div>
      <table class="table table-dark table-striped table-bordered table-hover">
        <tr>
          <th scope="col">Total Earned</th>
        </tr>
        <tr>
            <td>{{"$%.2f" | format(total)}}</td>
        </tr>
      </table>
      {% else -%}
      <h3>Sorry</h3>
        <p>
          You have no income to display here. To add income go
          <a href="/add-income">here</a>. In the future, use the links in the
          navigation bar on the top!
        </p>
      {% endif %}
    </div>
    <div>
  </div>
</div>
{% endblock %}
